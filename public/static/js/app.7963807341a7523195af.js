webpackJsonp([1],{"+Vni":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"ccu"}},[a("v-navigation-drawer",{staticClass:"gray-bg",attrs:{persistent:"persistent","enable-resize-watcher":"enable-resize-watcher",app:"app"},model:{value:t.flag.drawer,callback:function(e){t.$set(t.flag,"drawer",e)},expression:"flag.drawer"}},[a("v-toolbar",{staticClass:"personal-info pa-3",attrs:{flat:"flat"}},[a("v-list",{staticClass:"pa-0",attrs:{dense:"dense","two-line":"two-line"}},[t.User.loggedIn?a("v-list-tile",{staticClass:"px-4",attrs:{avatar:"avatar",ripple:"ripple"}},[a("v-list-tile-avatar",{attrs:{size:"48"}},[a("img",{attrs:{src:"https://i.imgur.com/KDLeUaq.jpg"}})]),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(t.User.name))]),a("v-list-tile-sub-title",{staticClass:"blue-grey--text lighten-1--text"},[a("v-icon",{staticClass:"blue-grey--text lighten-1--text body-1"},[t._v("place")]),a("span",[t._v(t._s(t.User.department)+", "+t._s(t.User.classes))])],1)],1)],1):a("v-list-tile",{staticClass:"px-4"},[a("v-list-tile-content",[a("v-btn",{attrs:{color:"primary",dark:"dark"},on:{click:function(e){t.flag.login=!0}}},[t._v("登入")])],1)],1)],1)],1),a("v-list",{staticClass:"pt-0 striped course-list",attrs:{dense:"dense","three-line":"three-line"}},[a("v-divider"),a("v-list-tile",[a("v-list-tile-action"),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"course-head"},[a("span",[t._v("課程列表")])])],1)],1),t._l(t.CourseList,function(e,n){return a("v-list-tile",{key:e.id,attrs:{to:{path:"/course/"+e.id},ripple:"ripple"}},[a("v-list-tile-action"),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"course-list-name"},[a("span",[t._v(t._s(e.name))])]),a("v-list-tile-sub-title",[a("span",[t._v(t._s(e.professor))])])],1)],1)})],2)],1),a("v-toolbar",{staticClass:"color-nav",attrs:{dark:"dark",color:"primary",fixed:"fixed",app:"app"}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.flag.drawer=!t.flag.drawer}}}),a("v-toolbar-title",{staticClass:"white--text ecourse-logo"},[t._v("eCourse+")]),a("v-spacer"),a("v-menu",[a("v-btn",{staticClass:"setting-btn",attrs:{slot:"activator",icon:"icon"},slot:"activator"},[a("v-icon",[t._v("settings")])],1),a("v-list",[a("v-list-tile",{staticClass:"list__tile--link"},[a("v-list-tile-title",{on:{click:function(e){t.flag.setting=!0}}},[t._v("  設定")])],1),a("v-list-tile",{staticClass:"list__tile--link"},[a("v-list-tile-title",{on:{click:function(e){t.flag.about=!0}}},[t._v("  關於本站")])],1),a("v-list-tile",{staticClass:"list__tile--link"},[a("v-list-tile-title",{on:{click:t.fetchData}},[t._v("  強制刷新  ")])],1),a("v-divider"),a("v-list-tile",{staticClass:"list__tile--link"},[a("v-list-tile-title",{on:{click:t.logout}},[t._v(" "),a("v-icon",[t._v("mdi-logout-variant")]),t._v(" 登出")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450",scroll:"scroll"},model:{value:t.flag.setting,callback:function(e){t.$set(t.flag,"setting",e)},expression:"flag.setting"}},[a("v-toolbar",{staticClass:"blue",attrs:{dark:"dark"}},[a("v-icon",[t._v("mdi-wrench")]),a("v-toolbar-title",[t._v("設定")])],1),a("v-list",{staticClass:"tile-hover",attrs:{"two-line":"two-line",subheader:"subheader"}},[t._l(t.settingData,function(e,n){return[a("v-subheader",{key:n},[t._v(t._s(n))]),t._l(e,function(e){return a("v-list-tile",{key:e.title,attrs:{ripple:"ripple",avatar:"avatar"},on:{click:function(t){}}},[a("v-list-tile-action",[a("v-checkbox",{attrs:{color:"blue darken-1"},model:{value:t.setting[e.field],callback:function(a){t.$set(t.setting,e.field,a)},expression:"setting[subItem.field]"}})],1),a("v-list-tile-content",{on:{click:function(a){t.setting[e.field]=!t.setting[e.field]}}},[a("v-list-tile-title",[t._v(t._s(e.title))]),a("v-list-tile-sub-title",[t._v(t._s(e.description))])],1)],1)}),a("v-divider")]})],2)],1),a("v-dialog",{attrs:{width:"300px"},model:{value:t.flag.login,callback:function(e){t.$set(t.flag,"login",e)},expression:"flag.login"}},[a("v-card",{staticClass:"dialog-box"},[a("v-card-title",{staticClass:"headline"},[a("div",{staticClass:"text-xs-center"},[t._v("登入帳號")])]),a("v-card-text",[t._v("請輸入"),a("b",[t._v("單一入口帳號密碼")]),a("v-container",{attrs:{"grid-list-md":"grid-list-md"}},[a("v-layout",{attrs:{wrap:"wrap"}},[a("v-flex",{attrs:{xs12:"xs12"}},[a("v-text-field",{attrs:{label:"帳號",required:"required"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),a("v-flex",{attrs:{xs12:"xs12"}},[a("v-text-field",{attrs:{label:"密碼",required:"required",type:"password"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(!1)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",large:"large",dark:"dark"},nativeOn:{click:function(e){t.login(!1)}}},[a("v-icon",[t._v("mdi-flash")]),t._v("登入")],1),a("v-spacer")],1)],1)],1)],1)],1),a("v-content",{staticClass:"mb-5"},[a("v-container",{attrs:{fluid:"fluid"}},[a("transition",{attrs:{name:"slide",mode:"out-in"}},[a("keep-alive",[a("router-view")],1)],1),a("v-snackbar",{attrs:{timeout:t.toast.timeout,top:t.toast.top,left:t.toast.left,right:t.toast.right,bottom:t.toast.bottom,color:t.toast.color},model:{value:t.toast.show,callback:function(e){t.$set(t.toast,"show",e)},expression:"toast.show"}},[t._v(t._s(t.toast.message))])],1)],1),a("v-footer",{attrs:{absolute:"absolute"}},[a("v-spacer"),a("span",[t._v("© 2018 @Copyright by Pionxzh")]),a("v-spacer")],1),a("v-fab-transition",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isScroll,expression:"isScroll"},{name:"scroll",rawName:"v-scroll",value:t.onScroll,expression:"onScroll"}],staticStyle:{margin:"6px 8px"},attrs:{fixed:"fixed",bottom:"bottom",right:"right",dark:"dark",fab:"fab",color:"red"},on:{click:t.toTop}},[a("v-icon",[t._v("mdi-chevron-up")])],1)],1),a("v-fab-transition",[a("v-speed-dial",{directives:[{name:"show",rawName:"v-show",value:!t.isScroll,expression:"!isScroll"}],staticStyle:{"z-index":"10"},attrs:{fixed:"fixed",bottom:"bottom",right:"right","open-on-hover":"open-on-hover",transition:"slide-x-transition"}},[a("v-btn",{attrs:{slot:"activator",color:"red",dark:"dark",fab:"fab",hover:"hover"},slot:"activator"},[a("v-icon",[t._v("mdi-rocket")]),a("v-icon",[t._v("close")])],1),a("v-tooltip",{attrs:{left:"left"}},[a("v-btn",{attrs:{slot:"activator",fab:"fab",dark:"dark",color:"green"},slot:"activator"},[a("v-icon",[t._v("mdi-settings")])],1),a("span",[t._v("設定")])],1),a("v-tooltip",{attrs:{left:"left"}},[a("v-btn",{attrs:{slot:"activator",fab:"fab",dark:"dark",color:"pink"},on:{click:function(t){}},slot:"activator"},[a("v-icon",[t._v("mdi-chart-line")])],1),a("span",[t._v("成績")])],1)],1)],1)],1)},r=[],o={render:n,staticRenderFns:r};e.a=o},BcEq:function(t,e,a){"use strict";a.d(e,"i",function(){return n}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return o}),a.d(e,"d",function(){return s}),a.d(e,"h",function(){return i}),a.d(e,"g",function(){return c}),a.d(e,"f",function(){return l}),a.d(e,"b",function(){return u}),a.d(e,"e",function(){return d});var n="USER",r="COURSE",o="ANNOUNCE",s="HOMEWORK",i="TEXTBOOK",c="SETTING",l="HWFILE",u="ANNOUNCE_NOTIFY",d="HOMEWORK_NOTIFY"},DEN3:function(t,e){t.exports={sso:{login:"/sso/login_check.php",logout:"/sso/logout_check.php",index:"/sso/index.php",ssoIndex:"/sso/sso_index.php",authcode:"/sso/misc/imgcode.php"},ecourse:{HOST:"https://ecourse.ccu.edu.tw",LOGIN:"/ec/php/index_login.php",LOGOUT:"/ec/php/logout.php",INDEX:"/ec/php/Courses_Admin/take_course.php?frame=1",INTRO:"/ec/php/Courses_Admin/intro.php",MOBILE:"/ec/ecourse/php/index_login.php",ANNOUNCE:"/ec/ecourse/php/courses_news/news.php",HOMEWORK:"/ec/ecourse/php/courses_homework/homework.php",TEXTBOOK:"/ec/ecourse/php/courses_textbook/material.php",COURSE_SELECT:"/ec/php/login_s.php",COURSE_SCORE:"/ec/php/Trackin/SGQueryFrame1.php",UNDER_DIR_FILE:"/ec/ecourse/php/courses_homework/UnderDirFile.php",SHOW_WORK:"/ec/php/Testing_Assessment/show_allwork.php",TEACHER_INFO:"/ec/php/Learner_Profile/show_teacher_info.php"}}},IcnI:function(t,e,a){"use strict";var n=a("/5sW"),r=a("NYxO"),o=a("ukYY"),s=a("UjVw"),i=a("mUbh");n.a.use(r.a),e.a=new r.a.Store({state:{userData:{loggedIn:!1,username:"",name:"",studentId:"",department:"",classes:""},template:{},courseList:[],announceData:{},homeworkData:{},textbookData:{},settingData:{},homeworkFile:{},announceNotify:{},homeworkNotify:{}},mutations:o.a,getters:s,actions:i,strict:!1})},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("/5sW"),r=a("NYxO"),o=a("IcnI"),s=a("cHtD"),i=a("3EgV"),c=a.n(i),l=a("cwXR");n.a.config.productionTip=!1,n.a.use(r.a),n.a.use(c.a),new n.a({el:"#app",router:s.a,store:o.a,render:function(t){return t(l.a)}})},NUJE:function(t,e,a){"use strict";var n=a("Zrlr"),r=a.n(n),o=a("wxAW"),s=a.n(o),i=function(){function t(){r()(this,t)}return s()(t,null,[{key:"errHandler",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.error((e||"")+"\n"+t)}},{key:"getSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 Bytes";var a=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(e))+" "+a[n]}},{key:"dayDiff",value:function(t){var e=new Date,a=new Date(t);return Math.abs(e-a)/864e5}},{key:"copyToClipboard",value:function(t){var e=document.createElement("div");document.body.appendChild(e),e.innerHTML=t,window.getSelection().removeAllRanges();var a=document.createRange();a.selectNode(e),window.getSelection().addRange(a);var n=document.execCommand("copy",!1);return e.remove(),n}},{key:"openLink",value:function(t,e){var a=document.createElement("a");e&&(a.download=e),a.target="_blank",a.href=t,a.click(),a.remove()}},{key:"getCookie",value:function(t){var e=document.cookie.split(";").find(function(e){return e.startsWith(t+"=")});if(e)return e.split("=")[1]}}]),t}();e.a=i},OavV:function(t,e,a){"use strict";(function(t){var n=a("mvHQ"),r=a.n(n),o=a("Xxa5"),s=a.n(o),i=a("exGp"),c=a.n(i),l=a("Dd8w"),u=a.n(l),d=a("PsJB"),p=a("z14t"),f=a("asR1"),v=a("POz1"),h=a("zk8U"),m=a("O4Lo"),g=a.n(m),w=a("NYxO");window.$=window.jQuery=t,e.a={name:"Ecourse",data:function(){return{loading:!1,isScroll:!1,username:"",password:"",flag:{drawer:!0,setting:!1,login:!1,about:!1},setting:{detectUrl:!0,detectDate:!0,annDivider:!1,expandFirstFolder:!0,isDownloadQuestion:!1,isDownloadTextbook:!1,showIntro:!0,showTeacherInfo:!0},settingData:{"公告":[{field:"detectDate",title:"日期偵測",description:"公告日期添加底線"},{field:"detectUrl",title:"偵測網址",description:"公告網址變為可點之連結"},{field:"annDivider",title:"顯示格線",description:"每個項目之間添加分隔線"}],"作業":[{field:"isDownloadQuestion",title:"強制下載題目",description:"點擊後會強制下載而非打開新視窗(Safari無效)"}],"教材":[{field:"showIntro",title:"授課大綱",description:"是否顯示授課大綱"},{field:"showTeacherInfo",title:"教師資訊",description:"是否顯示教師資訊"},{field:"expandFirstFolder",title:"自動展開首項",description:"教材第一個資料夾會自動打開"},{field:"isDownloadTextbook",title:"強制下載教材",description:"點擊後會強制下載而非打開新視窗(Safari無效)"}],"成績":[]},toast:{show:!1,timeout:3e3,top:!0,right:!1,bottom:!1,left:!1,color:"success",message:""}}},computed:u()({},Object(w.c)({User:"getUser",HomeworkData:"getHomework",CourseList:"getCourseList"}),{loginData:function(){return{id:this.username,pass:this.password,ver:"C"}}}),created:function(){var t=this;return c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setting&&(t.setting=JSON.parse(localStorage.setting)),t.updateSetting(t.setting),e.next=4,t.autoLogin();case 4:if(!t.$route.params.id){e.next=7;break}return e.next=7,p.a.changeCourse(t.$route.params.id);case 7:case"end":return e.stop()}},e,t)}))()},watch:{setting:{handler:function(){this.updateSetting(this.setting)},deep:!0}},methods:u()({},Object(w.b)(["updateUser","updateCourse","updateAnnounce","updateHomework","updateTextbook","updateSetting","updateHwFile"]),{onScroll:g()(function(){this.isScroll=window.scrollY>200},100),toTop:function(){window.scroll({top:0,behavior:"smooth"})},showToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.message,a=void 0===e?"":e,n=t.top,r=void 0===n||n,o=t.right,s=void 0!==o&&o,i=t.bottom,c=void 0!==i&&i,l=t.left,u=void 0!==l&&l,d=t.color,p=void 0===d?"success":d,f=t.timeout,v=void 0===f?3e3:f;this.toast.show=!0,this.toast.top=r,this.toast.right=s,this.toast.bottom=c,this.toast.left=u,this.toast.color=p,this.toast.timeout=v,this.toast.message=a},autoLogin:function(){var t=this;return c()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.user){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.a.getIndex();case 4:if(a=e.sent,-1!==a.indexOf("權限錯誤")){e.next=10;break}return t.updateUser({username:JSON.parse(localStorage.user).username,loggedIn:!0}),e.next=9,t.fetchData();case 9:return e.abrupt("return");case 10:return e.next=12,t.login(!0);case 12:case"end":return e.stop()}},e,t)}))()},login:function(t){var e=this;return c()(s.a.mark(function a(){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=t?JSON.parse(localStorage.user):e.loginData,a.next=3,d.a.login(n);case 3:if(o=a.sent,o.stat){a.next=6;break}return a.abrupt("return",e.showToast({message:o.message,color:"error"}));case 6:return t||(localStorage.user=r()(e.loginData)),e.flag.login=!1,e.showToast({message:"登入成功",color:"success"}),e.updateUser({username:n.username,loggedIn:!0}),a.next=12,e.fetchData();case 12:case"end":return a.stop()}},a,e)}))()},logout:function(){var t=this;return c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.logout();case 2:t.updateUser({loggedIn:!1}),t.showToast({message:"登出成功",color:"success"});case 4:case"end":return e.stop()}},e,t)}))()},fetchData:function(){var t=this;return c()(s.a.mark(function e(){var a,n,r,o,i,c,l,u,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getIndex();case 2:return a=e.sent,n=d.a.getData(a),r=p.a.getList(a),t.updateUser(n),t.updateCourse(r.data),e.next=9,f.a.getData();case 9:return o=e.sent,i=localStorage.annNotify?JSON.parse(localStorage.annNotify):{},t.updateAnnounce([o.data,i]),e.next=14,v.a.getData();case 14:return c=e.sent,t.updateHomework(c.data),e.next=18,v.a.getAllQuestion(t.HomeworkData);case 18:return l=e.sent,t.updateHwFile(l.data),e.next=22,h.a.getData();case 22:u=e.sent,t.updateTextbook(u.data),m=!(o.stat&&c.stat&&l.stat&&u.stat),m?t.showToast({message:"取得資料錯誤",color:"error"}):t.showToast({message:"取得資料成功",color:"info"});case 26:case"end":return e.stop()}},e,t)}))()},doNothing:function(){}})}}).call(e,a("7t+N"))},POz1:function(t,e,a){"use strict";(function(t){var n=a("mvHQ"),r=a.n(n),o=a("BO1k"),s=a.n(o),i=a("Xxa5"),c=a.n(i),l=a("exGp"),u=a.n(l),d=a("Zrlr"),p=a.n(d),f=a("wxAW"),v=a.n(f),h=a("mw3O"),m=a.n(h),g=a("mtWM"),w=a.n(g),x=a("NUJE"),k=new TextDecoder("big5"),b=a("DEN3"),_=function(){function e(){p()(this,e)}return v()(e,null,[{key:"getData",value:function(){function e(t){return a.apply(this,arguments)}var a=u()(c.a.mark(function e(a){var n,r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get(b.ecourse.HOMEWORK).catch(function(t){return x.a.errHandler(t,"Get Homework Error!")});case 2:return n=e.sent,r=t(t.parseHTML(n.data,!0)).filter("script:not([src])")[0].innerHTML,e.prev=4,o=JSON.parse(r.substring(r.indexOf("js =")+5,r.indexOf("function")-7)),console.log("Homework:\n",o),e.abrupt("return",{stat:!0,data:o});case 10:return e.prev=10,e.t0=e.catch(4),x.a.errHandler(e.t0,"Parse Homework Fail!"),e.abrupt("return",{stat:!1,data:[]});case 14:case"end":return e.stop()}},e,this,[[4,10]])}));return e}()},{key:"getAllQuestion",value:function(){function t(t){return e.apply(this,arguments)}var e=u()(c.a.mark(function t(e){var a,n,o,i,l,u,d,p,f,v,h,m;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={},n=localStorage.homeworkFile?JSON.parse(localStorage.homeworkFile):{},t.t0=c.a.keys(e);case 3:if((t.t1=t.t0()).done){t.next=45;break}o=t.t1.value,i=e[o].list,a[o]={},l=!0,u=!1,d=void 0,t.prev=10,p=s()(i);case 12:if(l=(f=p.next()).done){t.next=29;break}if(v=f.value,v.id){t.next=16;break}return t.abrupt("continue",26);case 16:if(h=v.id,!(m=!!n[o]&&!!n[o][h]&&Date.now()<n[o][h].timeStamp+864e5)){t.next=22;break}t.t2=n[o][h],t.next=25;break;case 22:return t.next=24,this.getQuestion(o,h);case 24:t.t2=t.sent;case 25:a[o][h]=t.t2;case 26:l=!0,t.next=12;break;case 29:t.next=35;break;case 31:t.prev=31,t.t3=t.catch(10),u=!0,d=t.t3;case 35:t.prev=35,t.prev=36,!l&&p.return&&p.return();case 38:if(t.prev=38,!u){t.next=41;break}throw d;case 41:return t.finish(38);case 42:return t.finish(35);case 43:t.next=3;break;case 45:return console.log("HwFile:\n",a),localStorage.homeworkFile=r()(a),t.abrupt("return",{stat:!0,data:a});case 48:case"end":return t.stop()}},t,this,[[10,31,35,43],[36,,38,42]])}));return t}()},{key:"getQuestion",value:function(){function t(t,a){return e.apply(this,arguments)}var e=u()(c.a.mark(function t(e,a){var n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get(b.ecourse.UNDER_DIR_FILE,{params:{action:"Question",courseid:e,workid:a}}).catch(function(t){return x.a.errHandler(t,"Get Question Error!")});case 2:return n=t.sent,r={type:null,timeStamp:Date.now()},n.data.size&&!n.data.status&&(r.type=n.data.type.slice(1)),t.abrupt("return",r);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"getAnswer",value:function(){function t(t,a){return e.apply(this,arguments)}var e=u()(c.a.mark(function t(e,a){var n,r,o,i,l,u,d,p;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get(b.ecourse.UNDER_DIR_FILE,{params:{action:"seemywork",courseid:e,workid:a}}).catch(function(t){return x.a.errHandler(t,"Get Answer Error!")});case 2:if(n=t.sent,r=[],!Array.isArray(n.data)){t.next=27;break}for(n.data.pop(),o=!0,i=!1,l=void 0,t.prev=9,u=s()(n.data);!(o=(d=u.next()).done);o=!0)p=d.value,r.push({id:1e3*Math.random(),name:p[0],size:x.a.getSize(p[1]),timeStamp:p[2]});t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),i=!0,l=t.t0;case 17:t.prev=17,t.prev=18,!o&&u.return&&u.return();case 20:if(t.prev=20,!i){t.next=23;break}throw l;case 23:return t.finish(20);case 24:return t.finish(17);case 25:t.next=28;break;case 27:r[0]={name:"homework.html",size:"? bytes",content:n.data.work,timeStamp:n.data.mtime,progress:100};case 28:return console.log(r),t.abrupt("return",r);case 30:case"end":return t.stop()}},t,this,[[9,13,17,25],[18,,20,24]])}));return t}()},{key:"removeAnswer",value:function(){function t(t,a,n){return e.apply(this,arguments)}var e=u()(c.a.mark(function t(e,a,n){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get(b.ecourse.SHOW_WORK,{params:{action:"del",work_id:a,filename:n}});case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"uploadText",value:function(){function t(t,a){return e.apply(this,arguments)}var e=u()(c.a.mark(function t(e,a){var n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.a.stringify({ans:e,work_id:a,action:"handinwork"}),t.next=3,w.a.post(b.ecourse.SHOW_WORK,n,{responseType:"arraybuffer"});case 3:if(r=t.sent,-1!==k.decode(r.data).indexOf("成功")){t.next=6;break}return t.abrupt("return",!1);case 6:return t.abrupt("return",!0);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"uploadFile",value:function(){function t(t,a,n){return e.apply(this,arguments)}var e=u()(c.a.mark(function t(e,a,n){var r,o,s,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),r=new FormData,r.append("work_id",n),1===e.length)r.append("action","uploadstuwork"),r.append("uploadfile1",e[0],e[0].name);else for(r.append("action","uploadotherwork"),o=0;o<e.length;o++)s=e[o],r.append("uploadfile"+o,s);return t.next=6,w.a.post(b.ecourse.SHOW_WORK,r,{responseType:"arraybuffer"});case 6:if(i=t.sent,-1!==k.decode(i.data).indexOf("成功")){t.next=9;break}return t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}},t,this)}));return t}()}]),e}();e.a=_}).call(e,a("7t+N"))},PsJB:function(t,e,a){"use strict";var n=a("Gu7T"),r=a.n(n),o=a("Xxa5"),s=a.n(o),i=a("exGp"),c=a.n(i),l=a("Zrlr"),u=a.n(l),d=a("wxAW"),p=a.n(d),f=a("mw3O"),v=a.n(f),h=a("mtWM"),m=a.n(h),g=a("NUJE"),w=a("DEN3"),x=new TextDecoder("big5"),k=function(){function t(){u()(this,t)}return p()(t,null,[{key:"getIndex",value:function(){function t(){return e.apply(this,arguments)}var e=c()(s.a.mark(function t(){var e,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get(w.ecourse.INDEX,{responseType:"arraybuffer"}).catch(function(t){return g.a.errHandler(t,"Get MainPage Error!")});case 2:return e=t.sent,a=x.decode(e.data),t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"getData",value:function(t){var e={name:"",classes:"",studentId:"",department:""};try{var a=/：([\u4e00-\u9fa5 a-zA-Z0-9\s()]+).{15}：([0-9]+).{15}：([\u4e00-\u9fa5\/a-zA-Z0-9]+).{15}：([a-zA-Z0-9]+)/g,n=[].concat(r()(a.exec(t)));return e.name=n[1],e.classes=n[4],e.studentId=n[2],e.department=n[3],e}catch(t){return g.a.errHandler(t,"Parse User Fail!"),e}}},{key:"login",value:function(){function t(t){return e.apply(this,arguments)}var e=c()(s.a.mark(function t(e){var a,n,r=this;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={},n=!1,e=v.a.stringify(e),t.next=5,m.a.post(w.ecourse.LOGIN,e).then(function(t){n=!0}).catch(function(t){a.stat=r.crossHandler(t)});case 5:return t.next=7,m.a.post(w.ecourse.MOBILE,e).then(function(t){n=!0}).catch(function(t){a.stat=r.crossHandler(t)});case 7:return n&&(a.stat=!1,a.message="登入失敗: 帳號密碼錯誤"),t.abrupt("return",a);case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"logout",value:function(){function t(){return e.apply(this,arguments)}var e=c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get(w.ecourse.LOGOUT).catch(function(t){return g.a.errHandler(t,"Logout Error!")});case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"crossHandler",value:function(t){return"Network Error"===t.message||(g.a.errHandler(t,"Login Error!"),!1)}}]),t}();e.a=k},QQw2:function(t,e,a){"use strict";var n=a("Xxa5"),r=a.n(n),o=a("exGp"),s=a.n(o),i=a("Dd8w"),c=a.n(i),l=a("NUJE"),u=a("cHwD"),d=a("z14t"),p=a("POz1"),f=a("2Pnh"),v=a.n(f),h=a("NYxO"),m=a("DEN3");e.a={data:function(){return{isScroll:!1,search:{flag:!1,title:!0,keyword:""},announce:{flag:!1,text:"",title:"",contnet:"",toastShow:!1,toastColor:"success",message:""},homework:{flag:!1,title:"",contnet:""},textbook:{flag:!1},score:{flag:0,data:{}},screenshot:{flag:!1,url:""},uploadHW:{workID:0,content:"",flag:!1,list:{},toastShow:!1,toastColor:"success",message:""},homeworkAns:{},toast:{show:!1,top:!0,right:!1,bottom:!1,left:!1,color:"success",message:""},fileType:{pdf:"mdi-file-pdf-box",ppt:"mdi-file-powerpoint-box",pptx:"mdi-file-powerpoint-box",doc:"mdi-file-word-box",docx:"mdi-file-word-box",xls:"mdi-file-excel-box",xlsx:"mdi-file-excel-box",txt:"mdi-file-document-box",xml:"mdi-file-xml",jpg:"mdi-image",png:"mdi-image",jpeg:"mdi-image",gif:"mdi-image-multiple",ogg:"mdi-music-box",mp3:"mdi-music-box",mp4:"mdi-video",mpeg:"mdi-video",zip:"mdi-zip-box",rar:"mdi-zip-box",js:"mdi-language-javascript",php:"mdi-language-php",py:"mdi-language-python-text"},loading:!1}},created:function(){},computed:c()({},Object(h.c)({User:"getUser",CourseList:"getCourseList",Announce:"getAnnounce",Homework:"getHomework",Textbook:"getTextbook",Setting:"getSetting",HomeworkFile:"getHomeworkFile",AnnouceNotify:"getAnnNotify",HomeworkNotify:"getHwNotify"}),{courseID:function(){return this.$route.params.id},AnnounceList:function(){return this.Announce[this.$route.params.id]||{name:"QAO找不到",list:{}}},HomeworkList:function(){return this.Homework[this.$route.params.id]||{name:"QAO找不到",list:{}}},TextbookList:function(){return this.Textbook[this.$route.params.id]||{name:"QAO找不到",list:{}}},HwFile:function(){return this.HomeworkFile[this.$route.params.id]||localStorage.homeworkFile?JSON.parse(localStorage.homeworkFile)[this.$route.params.id]:{}},HwAns:function(){return this.homeworkAns[this.$route.params.id]||{}},AnnNotify:function(){return this.AnnouceNotify[this.$route.params.id]||{}},HwNotify:function(){return this.HomeworkNotify[this.$route.params.id]||{}}}),watch:{$route:function(t){var e=this;return s()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.changeCourse(t.params.id);case 2:if(!e.score.flag){a.next=7;break}return a.next=5,u.a.getScore();case 5:e.score.data=a.sent,window.scroll({top:0,behavior:"smooth"});case 7:case"end":return a.stop()}},a,e)}))()}},methods:c()({},Object(h.b)(["updateAnnNotify","updateHwNotify"]),{expandSearch:function(){var t=this;this.search.flag?(this.search.flag=!1,setTimeout(function(){t.search.title=!0},200)):(this.search.flag=!0,this.search.title=!1,setTimeout(function(){t.$refs.search.focus()},300))},showToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.message,a=void 0===e?"":e,n=t.top,r=void 0===n||n,o=t.right,s=void 0!==o&&o,i=t.bottom,c=void 0!==i&&i,l=t.color,u=void 0===l?"success":l;this.toast.show=!0,this.toast.top=r,this.toast.right=s,this.toast.bottom=c,this.toast.color=u,this.toast.message=a},showAnnounce:function(t){if(this.AnnounceList.list[t].content){var e=this.AnnounceList.list[t].content.replace(/\r\n/g,"<br>");if(this.announce.text=e,this.Setting.detectUrl){var a=/(((?:http(s)?:\/\/)[\w.-]+(?:\.[\w.-]+)+)[\w\-._~:\/?#[\]@!$&'*+,;=.]+)/g;e=e.replace(a,' <a href="$1" target="_blank">$2...</a> ')}if(this.Setting.detectDate){var n=/(([\d]{1,4}\/)?[\d]{1,4}\/[\d]{1,4})(\([\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u65e5\u661f\u671f]{1,3}\))?/g;e=e.replace(n,'<u class="date-padding">$1</u>$3')}this.AnnNotify[this.AnnounceList.list[t].id]&&this.updateAnnNotify([this.courseID,this.AnnounceList.list[t].id]),this.announce.flag=!0,this.announce.title=this.AnnounceList.list[t].title,this.announce.content=e}},showHomework:function(t){this.homework.flag=!0,this.homework.title=this.HomeworkList.list[t].title,this.homework.content=this.HomeworkList.list[t].content},copyAnnounce:function(){l.a.copyToClipboard(this.announce.text)&&(this.announce.toastShow=!0,this.announce.message="已將內容複製到剪貼簿。")},screenShot:function(){var t=this,e=document.getElementById("announce");v()(e).then(function(e){var a=e.toDataURL("image/png");t.screenshot.flag=!0,t.screenshot.url=a,l.a.openLink(a,t.announce.title+".png")})},downloadTextbook:function(t){var e=""+m.ecourse.HOST+t.slice(8);l.a.openLink(e,this.Setting.isDownloadTextbook)},downloadIntro:function(){l.a.openLink(m.ecourse.INTRO,!1)},downloadTeaIndo:function(){l.a.openLink(m.ecourse.TEACHER_INFO,!1)},downloadQues:function(t,e){var a=m.ecourse.HOST+"/"+this.courseID+"/homework/"+t+"/teacher/Question."+e;l.a.openLink(a,this.Setting.isDownloadQuestion)},downloadAns:function(t){var e=m.ecourse.SHOW_WORK+"?action=downloadFile&work_id="+this.uploadHW.workID+"&filename="+t;l.a.openLink(e,!1)},showScore:function(){var t=this;return s()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.score.flag=1,setTimeout(function(){t.score.flag=2},300),e.next=4,u.a.getScore();case 4:t.score.data=e.sent;case 5:case"end":return e.stop()}},e,t)}))()},showUpload:function(t){var e=this;return s()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.uploadHW.workID=t,e.uploadHW.flag=!0,e.homeworkAns[e.courseID]||(e.homeworkAns[e.courseID]={}),a.next=5,p.a.getAnswer(e.courseID,t);case 5:n=a.sent,e.uploadHW.list=n.map(function(t){return t.new=!1,t});case 7:case"end":return a.stop()}},a,e)}))()},showUploadToast:function(t){this.uploadHW.toastShow=!0,this.uploadHW.toastColor="success",this.uploadHW.message=t},uploadText:function(){var t=this;return s()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.uploadText(t.uploadHW.content,t.uploadHW.workID);case 2:return e.next=4,p.a.getAnswer(t.courseID,t.uploadHW.workID);case 4:t.uploadHW.list=e.sent,t.showUploadToast("上傳成功");case 6:case"end":return e.stop()}},e,t)}))()},uploadFile:function(t){var e=this;return s()(r.a.mark(function a(){var n,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.target.files||t.dataTransfer.files,n.length){a.next=3;break}return a.abrupt("return");case 3:return e.uploadHW.list.push({id:1e3*Math.random(),name:n[0].name,size:l.a.getSize(n[0].size),new:!0}),a.next=6,p.a.uploadFile(n,e.courseID,e.uploadHW.workID);case 6:if(o=a.sent){a.next=9;break}return a.abrupt("return");case 9:return a.next=11,p.a.getAnswer(e.courseID,e.uploadHW.workID);case 11:e.uploadHW.list=a.sent,e.uploadHW.list[e.uploadHW.list.length-1].success=!0,e.showUploadToast("上傳成功");case 14:case"end":return a.stop()}},a,e)}))()},removeAnswer:function(t){var e=this;return s()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(confirm("確定要刪除這個檔案?")){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,p.a.removeAnswer(e.courseID,e.uploadHW.workID,t);case 4:return a.next=6,p.a.getAnswer(e.courseID,e.uploadHW.workID);case 6:e.uploadHW.list=a.sent,e.showUploadToast("刪除成功");case 8:case"end":return a.stop()}},a,e)}))()}})}},QXmj:function(t,e,a){"use strict";var n=a("QQw2"),r=a("um8t"),o=a("VU/8"),s=o(n.a,r.a,!1,null,null,null);e.a=s.exports},SlG2:function(t,e,a){"use strict";var n=a("YSiv"),r=a("VU/8"),o=r(null,n.a,!1,null,null,null);e.a=o.exports},UjVw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"getUser",function(){return n}),a.d(e,"getCourseList",function(){return r}),a.d(e,"getAnnounce",function(){return o}),a.d(e,"getHomework",function(){return s}),a.d(e,"getTextbook",function(){return i}),a.d(e,"getHomeworkFile",function(){return c}),a.d(e,"getSetting",function(){return l}),a.d(e,"getAnnNotify",function(){return u}),a.d(e,"getHwNotify",function(){return d});var n=function(t){return t.userData},r=function(t){return t.courseList},o=function(t){return t.announceData},s=function(t){return t.homeworkData},i=function(t){return t.textbookData},c=function(t){return t.homeworkFile},l=function(t){return t.settingData},u=function(t){return t.announceNotify},d=function(t){return t.homeworkNotify}},YSiv:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t._v("走開走開٩(ŏ﹏ŏ、)۶不要跑來這裡(｡ŏ_ŏ)")])])}],o={render:n,staticRenderFns:r};e.a=o},asR1:function(t,e,a){"use strict";(function(t){var n=a("Xxa5"),r=a.n(n),o=a("exGp"),s=a.n(o),i=a("Zrlr"),c=a.n(i),l=a("wxAW"),u=a.n(l),d=a("mtWM"),p=a.n(d),f=a("NUJE"),v=a("DEN3"),h=function(){function e(){c()(this,e)}return u()(e,null,[{key:"getData",value:function(){function e(t){return a.apply(this,arguments)}var a=s()(r.a.mark(function e(a){var n,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(v.ecourse.ANNOUNCE).catch(function(t){return f.a.errHandler(t,"Get Announce Error!")});case 2:return n=e.sent,o=t(t.parseHTML(n.data,!0)).filter("script:not([src])")[0].innerHTML,e.prev=4,s=JSON.parse(o.substring(o.indexOf("js =")+5,o.indexOf("//console")-10)),console.log("Announce:\n",s),e.abrupt("return",{stat:!0,data:s});case 10:return e.prev=10,e.t0=e.catch(4),f.a.errHandler(e.t0,"Parse Announce Fail!"),e.abrupt("return",{stat:!1,data:[]});case 14:case"end":return e.stop()}},e,this,[[4,10]])}));return e}()}]),e}();e.a=h}).call(e,a("7t+N"))},cHtD:function(t,e,a){"use strict";var n=a("/5sW"),r=a("/ocq"),o=a("sDrE"),s=a("QXmj"),i=a("SlG2");n.a.use(r.a),e.a=new r.a({mode:"history",linkActiveClass:"active",routes:[{path:"/",name:"Ecourse",component:o.a,children:[{path:"/course",name:"Course",component:i.a},{path:"/course/:id",component:s.a}]},{path:"/*",redirect:"/"}]})},cHwD:function(t,e,a){"use strict";(function(t){var n=a("Xxa5"),r=a.n(n),o=a("exGp"),s=a.n(o),i=a("Zrlr"),c=a.n(i),l=a("wxAW"),u=a.n(l),d=a("mtWM"),p=a.n(d),f=a("NUJE"),v=a("DEN3"),h=new TextDecoder("big5"),m=function(){function e(){c()(this,e)}return u()(e,null,[{key:"getData",value:function(){function t(t){return e.apply(this,arguments)}var e=s()(r.a.mark(function t(e){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return t}()},{key:"getScore",value:function(){function e(t){return a.apply(this,arguments)}var a=s()(r.a.mark(function e(a){var n,o,s,i,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(v.ecourse.COURSE_SCORE,{responseType:"arraybuffer"}).catch(function(t){return f.a.errHandler(t)});case 2:return n=e.sent,o=t.parseHTML(h.decode(n.data)),s=t(o).find('tr[bgcolor="#4d6eb2"], tr[bgcolor="#E6FFFC"], tr[bgcolor="#F0FFEE"], tr[bgcolor="#B0BFC3"]').get(),i={},c="",s.forEach(function(e){var a=t(e).children();switch(t(e).attr("bgcolor")){case"#4d6eb2":c=t(a[0]).text().replace("(名稱)",""),i[c]=[];break;case"#B0BFC3":void 0!==i["總成績"]?i["總成績"][0].score=t(a[1]).text()+"分":i["總成績"]=[{name:"總成績",rank:t(a[1]).text()}];break;default:var n=t(a[2]).text()?t(a[2]).text()+"分":"-",r=t(a[3]).text().replace("你沒有成績","-");i[c].push({name:t(a[0]).text(),percentage:t(a[1]).text(),score:n,rank:r})}}),e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return e}()}]),e}();e.a=m}).call(e,a("7t+N"))},cwXR:function(t,e,a){"use strict";function n(t){a("iit1")}var r=a("hvH+"),o=a("VU/8"),s=n,i=o(null,r.a,!1,s,null,null);e.a=i.exports},"hvH+":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)},r=[],o={render:n,staticRenderFns:r};e.a=o},iit1:function(t,e){},mUbh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"updateUser",function(){return s}),a.d(e,"updateCourse",function(){return i}),a.d(e,"updateAnnounce",function(){return c}),a.d(e,"updateHomework",function(){return l}),a.d(e,"updateTextbook",function(){return u}),a.d(e,"updateSetting",function(){return d}),a.d(e,"updateHwFile",function(){return p}),a.d(e,"updateAnnNotify",function(){return f}),a.d(e,"updateHwNotify",function(){return v});var n=a("d7EF"),r=a.n(n),o=a("BcEq"),s=function(t,e){(0,t.commit)(o.i,e)},i=function(t,e){(0,t.commit)(o.c,e)},c=function(t,e){(0,t.commit)(o.a,e)},l=function(t,e){(0,t.commit)(o.d,e)},u=function(t,e){(0,t.commit)(o.h,e)},d=function(t,e){(0,t.commit)(o.g,e)},p=function(t,e){(0,t.commit)(o.f,e)},f=function(t,e){var a=t.commit,n=r()(e,2),s=n[0],i=n[1];a(o.b,[s,i])},v=function(t,e){var a=t.commit,n=r()(e,2),s=n[0],i=n[1];a(o.e,[s,i])}},sDrE:function(t,e,a){"use strict";var n=a("OavV"),r=a("+Vni"),o=a("VU/8"),s=o(n.a,r.a,!1,null,null,null);e.a=s.exports},ukYY:function(t,e,a){"use strict";a.d(e,"a",function(){return k});var n,r=a("bOdI"),o=a.n(r),s=a("Xxa5"),i=a.n(s),c=a("exGp"),l=a.n(c),u=a("mvHQ"),d=a.n(u),p=a("d7EF"),f=a.n(p),v=a("fZjL"),h=a.n(v),m=a("/5sW"),g=a("Ba3q"),w=a.n(g),x=a("BcEq"),k=(n={},o()(n,x.i,function(t,e){h()(e).forEach(function(a){t.userData[a]=e[a]})}),o()(n,x.c,function(t,e){t.courseList=e}),o()(n,x.a,function(t,e){var a=f()(e,2),n=a[0],r=a[1],o=new Date;t.template=n.map(function(t){return t[0]},[]),t.announceData=n.reduce(function(t,e){var a=e[0];return r[a]||(r[a]={}),e[2]=e[2]||[],t[a]={},t[a].name=e[1],t[a].list=e[2].length?e[2].reduce(function(t,e){var n=e[0];return void 0===r[a][n]&&(r[a][n]=Math.abs(o-new Date(e[2]))<6048e5),t.push({id:n,title:e[8],content:e[9]||"沒有內容",timeStamp:e[2]}),w()(t,["timeStamp","title"],["desc","asc"])},[]):[{title:"暫無公告"}],t},{}),localStorage.annNotify=d()(r),t.announceNotify=r}),o()(n,x.d,function(t,e){var a=this;return l()(i.a.mark(function n(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.homeworkData=e.reduce(function(t,e){var a=e[0];return t[a]={},t[a].name=e[1],t[a].list=null===e[2]?[{title:"暫無作業"}]:e[2].reduce(function(t,e){return t.push({id:e[1],title:e[0],content:e[4]||"沒有內容",percentage:e[2],timeStamp:e[3]}),w()(t,["timeStamp","title"],["desc","asc"])},[]),t},{});case 1:case"end":return a.stop()}},n,a)}))()}),o()(n,x.h,function(t,e){var a=e.textbook,n=e.chapter,r={};t.template.forEach(function(t,e){r[t]={},r[t].list=n[e]||{0:{0:"所有教材"}},r[t].content=a[e]}),t.textbookData=r}),o()(n,x.g,function(t,e){console.log("Setting\n",e),h()(e).forEach(function(a){m.a.set(t.settingData,a,e[a])}),localStorage.setting=d()(t.settingData)}),o()(n,x.f,function(t,e){t.homeworkFile=e}),o()(n,x.b,function(t,e){var a=f()(e,2),n=a[0],r=a[1];t.announceNotify[n][r]=!1,localStorage.annNotify=d()(t.announceNotify)}),o()(n,x.e,function(t,e){var a=f()(e,2),n=a[0],r=a[1];t.homeworkNotify[n][r]=!1,localStorage.homeworkNotify=d()(t.homeworkNotify)}),n)},um8t:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{key:t.$route.params.id,attrs:{row:"row",wrap:"wrap"}},[a("v-snackbar",{attrs:{timeout:3e3,top:t.toast.top,left:t.toast.left,right:t.toast.right,bottom:t.toast.bottom,color:t.toast.color},model:{value:t.toast.show,callback:function(e){t.$set(t.toast,"show",e)},expression:"toast.show"}},[t._v(t._s(t.toast.message))]),a("transition",{attrs:{name:"slide-x-transition"}},[0===t.score.flag?a("v-flex",{staticClass:"pl-2",attrs:{xs12:"xs12",md4:"md4"}},[a("v-card",{staticClass:"main-card elevation-1",attrs:{color:"grey lighten-5",flat:"flat"}},[a("v-toolbar",{staticStyle:{overflow:"hidden"},attrs:{dark:"dark",color:"primary",flat:"flat"}},[a("v-toolbar-side-icon"),a("transition",{attrs:{name:"fade-transition"}},[a("v-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:t.search.title,expression:"search.title"}]},[t._v("公告")])],1),a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.search.flag,expression:"!search.flag"}],staticClass:"mr-3",attrs:{icon:"icon"},on:{click:t.expandSearch}},[a("v-icon",[t._v("search")])],1),a("v-text-field",{ref:"search",staticClass:"exp-search",class:{open:t.search.flag},attrs:{type:"text",label:"搜尋標題",solo:"solo","prepend-icon":"search",light:"light"},on:{blur:t.expandSearch},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1),a("v-list",{staticClass:"tile-hover pa-0",attrs:{"two-line":"two-line",subheader:"subheader"}},[a("v-subheader",{directives:[{name:"show",rawName:"v-show",value:t.search.keyword,expression:"search.keyword"}]},[t._v("搜尋結果")]),t._l(t.AnnounceList.list,function(e,n){return[a("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:-1!==e.title.indexOf(t.search.keyword),expression:"item.title.indexOf(search.keyword) !== -1"}],key:e.id,attrs:{avatar:"avatar"},nativeOn:{click:function(e){t.showAnnounce(n)}}},[a("v-list-tile-avatar",[a("v-badge",{staticClass:"notify",attrs:{overlap:"overlap",color:"red"},model:{value:t.AnnNotify[e.id],callback:function(a){t.$set(t.AnnNotify,e.id,a)},expression:"AnnNotify[item.id]"}},[a("span",{attrs:{slot:"badge"},slot:"badge"}),a("v-icon",{class:[e.stat],attrs:{medium:"medium"}},[t._v("widgets")])],1)],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))]),a("v-list-tile-sub-title",[t._v(t._s(e.timeStamp))])],1)],1),t.Setting.annDivider?a("v-divider"):t._e()]})],2)],1)],1):t._e()],1),a("transition",{attrs:{name:"slide-y-transition"}},[0===t.score.flag?a("v-flex",{staticClass:"pl-2",attrs:{xs12:"xs12",md4:"md4"}},[a("v-card",{staticClass:"main-card elevation-1",attrs:{color:"grey lighten-5",flat:"flat"}},[a("v-toolbar",{attrs:{color:"green",flat:"flat",dark:"dark"}},[a("v-toolbar-side-icon"),a("v-toolbar-title",[t._v("作業")]),a("v-spacer"),a("v-tooltip",{staticClass:"mr-0",attrs:{left:"left"}},[a("v-btn",{attrs:{slot:"activator",icon:"icon"},on:{click:t.showScore},slot:"activator"},[a("v-icon",[t._v("mdi-chart-line")])],1),a("span",[t._v("成績")])],1)],1),a("v-list",{staticClass:"tile-hover pa-0",attrs:{"two-line":"two-line",subheader:"subheader"}},t._l(t.HomeworkList.list,function(e,n){return a("v-list-tile",{key:n,attrs:{ripple:"ripple",avatar:"avatar"},nativeOn:{click:function(e){t.showHomework(n)}}},[e.id?[a("v-list-tile-avatar",[a("v-icon",{attrs:{medium:"medium"}},[t._v("assignment")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))]),a("v-list-tile-sub-title",[t._v(t._s(e.timeStamp)+" / "+t._s(e.percentage)+"%")])],1),t.HwFile[e.id]&&t.HwFile[e.id].type?a("v-list-tile-action",[a("v-tooltip",{attrs:{top:"top"}},[a("v-btn",{attrs:{slot:"activator",icon:"icon"},on:{click:function(a){a.stopPropagation(),t.downloadQues(e.id,t.HwFile[e.id].type)}},slot:"activator"},[a("v-icon",{attrs:{large:"large",color:"grey lighten-1"}},[t._v(t._s(t.fileType[t.HwFile[e.id].type]||"mdi-file"))])],1),a("span",[t._v("作業題目")])],1)],1):t._e(),a("v-list-tile-action",[a("v-btn",{attrs:{icon:"icon"},on:{click:function(a){a.stopPropagation(),t.showUpload(e.id)}}},[a("v-icon",{attrs:{large:"large",color:"grey"}},[t._v("mdi-upload")])],1)],1)]:[a("v-list-tile-avatar"),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))])],1)]],2)}))],1)],1):t._e()],1),a("transition",{attrs:{name:"slide-x-reverse-transition",mode:"out-in"}},[0===t.score.flag?a("v-flex",{staticClass:"pl-2",attrs:{xs12:"xs12",md4:"md4"}},[a("v-card",{staticClass:"main-card elevation-1",attrs:{color:"grey lighten-5",flat:"flat"}},[a("v-toolbar",{attrs:{color:"orange",flat:"flat",dark:"dark"}},[a("v-toolbar-side-icon"),a("v-toolbar-title",[t._v("教材")]),a("v-spacer"),a("v-btn",{attrs:{icon:"icon"}},[a("v-icon",[t._v("search")])],1)],1),a("v-list",{staticClass:"pa-0",attrs:{"two-line":"two-line",subheader:"subheader"}},[t.Setting.showIntro?a("v-list-tile",{on:{click:t.downloadIntro}},[a("v-list-tile-avatar",[a("v-icon",{attrs:{large:"large"}},[t._v("mdi-file-account")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("授課大綱")])],1)],1):t._e(),t.Setting.showTeacherInfo?a("v-list-tile",{on:{click:t.downloadTeaIndo}},[a("v-list-tile-avatar",[a("v-icon",{attrs:{large:"large"}},[t._v("mdi-file-account")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("教師資訊")])],1)],1):t._e(),t._l(t.TextbookList.list,function(e,n){return t.TextbookList.content[n][0]?a("v-list-group",{key:e[0],attrs:{value:0===n&&t.Setting.expandFirstFolder,"prepend-icon":"folder"}},[a("v-list-tile",{attrs:{slot:"activator",ripple:"ripple"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e[0]))])],1)],1),t._l(t.TextbookList.content[n][0],function(e){return a("v-list-tile",{key:e[0],nativeOn:{click:function(a){t.downloadTextbook(e[1])}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:"large"}},[t._v(t._s(t.fileType[e[4]]||"mdi-file"))])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e[0]))]),a("v-list-tile-sub-title",[t._v(t._s(e[3].split(" ")[0]))])],1)],1)})],2):t._e()})],2)],1)],1):t._e()],1),a("transition",{attrs:{name:"slide-y-reverse-transition",mode:"out-in"}},[2===t.score.flag?a("v-flex",{staticClass:"pl-2",attrs:{xs12:"xs12",md6:"md6","offset-md3":"offset-md3"}},[a("v-card",{staticClass:"main-card elevation-1 score-card",attrs:{flat:"flat",color:"grey lighten-5"}},[a("v-toolbar",{attrs:{color:"red",flat:"flat",dark:"dark"}},[a("v-toolbar-side-icon"),a("v-toolbar-title",[t._v("成績")]),a("v-spacer"),a("v-tooltip",{staticClass:"mr-0",attrs:{left:"left"}},[a("v-btn",{attrs:{slot:"activator",icon:"icon"},on:{click:function(e){t.score.flag=0}},slot:"activator"},[a("v-icon",[t._v("assignment")])],1),a("span",[t._v("作業")])],1)],1),a("v-list",{staticClass:"tile-hover stripe pa-0",attrs:{subheader:"subheader"}},[t._l(t.score.data,function(e,n){return e.length?[a("v-subheader",[t._v(t._s(n))]),t._l(e,function(e){return a("v-list-tile",{key:e.name+e.percentage,class:{"yellow lighten-1":"總成績"===n},attrs:{ripple:"ripple",avatar:"avatar"},on:{click:function(t){}}},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.name))]),a("v-list-tile-sub-title",[t._v(t._s(e.percentage))])],1),a("v-list-tile-action",[a("v-btn",{attrs:{flat:"flat",outline:"outline"}},[t._v(t._s(e.rank))])],1),a("v-list-tile-action",[a("v-btn",{attrs:{flat:"flat",outline:"outline"}},[t._v(t._s(e.score))])],1)],1)})]:t._e()})],2)],1)],1):t._e()],1),a("v-dialog",{attrs:{"max-width":"490"},model:{value:t.announce.flag,callback:function(e){t.$set(t.announce,"flag",e)},expression:"announce.flag"}},[a("v-card",{staticClass:"announce-dialog-box",attrs:{id:"announce"}},[a("v-snackbar",{attrs:{timeout:3e3,top:"top",absolute:"absolute",color:"success"},model:{value:t.announce.toastShow,callback:function(e){t.$set(t.announce,"toastShow",e)},expression:"announce.toastShow"}},[t._v(t._s(t.announce.message))]),a("v-card-title",{staticClass:"headline"},[a("div",{staticClass:"text-xs-center"},[t._v(t._s(t.announce.title))]),a("v-spacer"),a("v-tooltip",{attrs:{top:"top"}},[a("v-btn",{attrs:{slot:"activator",icon:"icon"},on:{click:t.copyAnnounce},slot:"activator"},[a("v-icon",[t._v("mdi-content-copy")])],1),a("span",[t._v("複製")])],1),a("v-tooltip",{attrs:{top:"top"}},[a("v-btn",{attrs:{slot:"activator",icon:"icon"},on:{click:t.screenShot},slot:"activator"},[a("v-icon",[t._v("mdi-camera")])],1),a("span",[t._v("截圖")])],1)],1),a("v-card-text",{domProps:{innerHTML:t._s(t.announce.content)}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{flat:"flat",color:"green darken-1"},nativeOn:{click:function(e){t.announce.flag=!1}}},[t._v("關閉")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"490"},model:{value:t.homework.flag,callback:function(e){t.$set(t.homework,"flag",e)},expression:"homework.flag"}},[a("v-card",{staticClass:"announce-dialog-box"},[a("v-card-title",{staticClass:"headline"},[a("div",{staticClass:"text-xs-center"},[t._v(t._s(t.homework.title))])]),a("v-card-text",{domProps:{innerHTML:t._s(t.homework.content)}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{flat:"flat",color:"green darken-1"},nativeOn:{click:function(e){t.homework.flag=!1}}},[t._v("關閉")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"560"},model:{value:t.screenshot.flag,callback:function(e){t.$set(t.screenshot,"flag",e)},expression:"screenshot.flag"}},[a("v-card",{staticClass:"announce-dialog-box elevation-5 grey"},[a("img",{staticClass:"pa-3",attrs:{src:t.screenshot.url,width:"560"}})])],1),a("v-dialog",{attrs:{"max-width":"600",persistent:"persistent"},model:{value:t.uploadHW.flag,callback:function(e){t.$set(t.uploadHW,"flag",e)},expression:"uploadHW.flag"}},[a("v-card",{staticClass:"announce-dialog-box",staticStyle:{"background-color":"#f2f2f2"}},[a("v-snackbar",{attrs:{timeout:3e3,top:!0,bottom:!1,color:t.uploadHW.toastColor,absolute:!0},model:{value:t.uploadHW.toastShow,callback:function(e){t.$set(t.uploadHW,"toastShow",e)},expression:"uploadHW.toastShow"}},[t._v(t._s(t.uploadHW.message))]),a("div",{staticClass:"headline text-xs-center pa-3"},[t._v("作業上傳"),a("v-btn",{staticClass:"right ma-0",attrs:{icon:"icon",ripple:"ripple"},on:{click:function(e){t.uploadHW.flag=!1}}},[a("v-icon",{attrs:{medium:"medium"}},[t._v("close")])],1)],1),a("v-layout",{attrs:{row:"row",wrap:"wrap"}},[a("v-container",{attrs:{fluid:"fluid"}},[a("v-subheader",{staticStyle:{color:"rgba(0,0,0,0.54)"}},[t._v("已交作業")]),a("v-layout",{attrs:{row:"row",wrap:"wrap"}},t._l(t.uploadHW.list,function(e){return a("v-flex",{key:e.id,staticClass:"upload-wrapper",attrs:{xs6:"xs6"}},[a("div",{staticClass:"white upload-item elevation-2"},[a("v-text-field",{class:{"input-group--focused":e.success},attrs:{"append-icon":e.success?"mdi-check-circle":e.new?"none":"delete","append-icon-cb":function(){return t.removeAnswer(e.name)},color:e.success?"green":"gray",loading:"loading",readonly:"readonly",label:e.size},nativeOn:{click:function(a){t.downloadAns(e.name)}},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"file.name"}},[e.new?a("v-progress-linear",{attrs:{slot:"progress",indeterminate:!0,value:1,height:"4"},slot:"progress"}):t._e()],1)],1)])})),a("v-subheader",{staticStyle:{color:"rgba(0,0,0,0.54)"}},[t._v("上傳檔案")]),a("v-flex",{attrs:{xs12:"xs12"}},[a("v-layout",{attrs:{row:"row",wrap:"wrap"}},[a("v-flex",{attrs:{sm9:"sm9",md10:"md10"}},[a("v-text-field",{staticClass:"white-text-field",staticStyle:{"margin-top":"-18px"},attrs:{label:"直接上傳答案文字",textarea:"textarea","auto-grow":"auto-grow"},model:{value:t.uploadHW.content,callback:function(e){t.$set(t.uploadHW,"content",e)},expression:"uploadHW.content"}})],1),a("v-flex",{staticClass:"pl-2",attrs:{sm3:"sm3",md2:"md2"}},[a("v-tooltip",{attrs:{left:"left"}},[a("v-btn",{staticClass:"mt-0 send-text-btn",attrs:{slot:"activator",color:"red darken-1",block:"block",dark:"dark"},on:{click:function(e){t.uploadText(e)}},slot:"activator"},[a("v-icon",[t._v("send")])],1),a("span",[t._v("送出")])],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"xs12"}},[a("v-layout",{attrs:{row:"row",wrap:"wrap"}},[a("v-flex",{attrs:{xs6:"xs6"}},[a("v-card",{staticClass:"upload-type",staticStyle:{"margin-right":"5px"},attrs:{color:"blue darken-1",dark:"dark"},nativeOn:{click:function(e){t.$refs.uploadInput.click()}}},[a("p",{staticClass:"text-xs-center"},[a("v-icon",{attrs:{dark:"dark"}},[t._v("mdi-upload")]),t._v("上傳檔案")],1),a("input",{ref:"uploadInput",attrs:{type:"file",multiple:!1},on:{change:t.uploadFile}})])],1),a("v-flex",{attrs:{xs6:"xs6"}},[a("v-card",{staticClass:"upload-type",staticStyle:{"margin-left":"5px"},attrs:{color:"green darken-1",dark:"dark"},nativeOn:{click:function(e){t.$refs.uploadMulInput.click()}}},[a("p",{staticClass:"text-xs-center"},[a("v-icon",{attrs:{dark:"dark"}},[t._v("mdi-upload-multiple")]),t._v("相關檔案")],1),a("input",{ref:"uploadMulInput",attrs:{type:"file",multiple:!0},on:{change:t.uploadFile}})])],1)],1)],1)],1)],1)],1)],1)],1)},r=[],o={render:n,staticRenderFns:r};e.a=o},z14t:function(t,e,a){"use strict";var n=a("Xxa5"),r=a.n(n),o=a("exGp"),s=a.n(o),i=a("Zrlr"),c=a.n(i),l=a("wxAW"),u=a.n(l),d=a("mtWM"),p=a.n(d),f=a("NUJE"),v=a("DEN3"),h=function(){function t(){c()(this,t)}return u()(t,null,[{key:"getList",value:function(t){try{for(var e=/login_s\.php\?courseid=[0-9]+_[0-9]+_([0-9]+)" target="_top">([\u4e00-\u9fa5 a-zA-Z0-9\s()（）]+)<\/a>.+?;">([\u4e00-\u9fa5]+)<\/a>/g,a=e.exec(t),n=[];a;)n.push({id:a[1],name:a[2],professor:a[3]}),a=e.exec(t);return console.log("CourseList:\n",n),{stat:!0,data:n}}catch(t){return f.a.errHandler(t,"Parse Course Fail!"),{stat:!1,data:[]}}}},{key:"changeCourse",value:function(){function t(t){return e.apply(this,arguments)}var e=s()(r.a.mark(function t(e){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get(v.ecourse.COURSE_SELECT,{params:{courseid:"106_1_"+e}}).then(function(t){}).catch(function(t){return f.a.errHandler});case 2:case"end":return t.stop()}},t,this)}));return t}()}]),t}();e.a=h},zk8U:function(t,e,a){"use strict";(function(t){var n=a("Xxa5"),r=a.n(n),o=a("exGp"),s=a.n(o),i=a("Zrlr"),c=a.n(i),l=a("wxAW"),u=a.n(l),d=a("mtWM"),p=a.n(d),f=a("NUJE"),v=a("DEN3"),h=function(){function e(){c()(this,e)}return u()(e,null,[{key:"getData",value:function(){function e(t){return a.apply(this,arguments)}var a=s()(r.a.mark(function e(a){var n,o,s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(v.ecourse.TEXTBOOK).catch(function(t){return f.a.errHandler(t,"Get Textbook Error!")});case 2:return n=e.sent,o=t(t.parseHTML(n.data,!0)).filter("script:not([src])")[0].innerHTML,e.prev=4,s=JSON.parse(o.substring(o.indexOf("Textbook")+11,o.indexOf("CourseName")-8)),console.log("Textbook:\n",s),i=JSON.parse(o.substring(o.indexOf("ChapTitle")+11,o.indexOf("$(CourseName)")-4)),console.log("ChapterTitle:\n",i),e.abrupt("return",{stat:!0,data:{textbook:s,chapter:i}});case 12:return e.prev=12,e.t0=e.catch(4),f.a.errHandler(e.t0,"Parse Textbook Fail!"),e.abrupt("return",{stat:!1,data:[]});case 16:case"end":return e.stop()}},e,this,[[4,12]])}));return e}()}]),e}();e.a=h}).call(e,a("7t+N"))}},["NHnr"]);